import{j as e,Q as B,S as T,a1 as Q,a2 as W,u as G,r as l,N as H,s as E,L as O,_ as i}from"./index-BGOoP327.js";import{c as q}from"./index-CVhGOhid.js";import"./iconBase-DY2o13lj.js";const r=({className:x})=>e.jsx("div",{className:`bg-slate-700 dark:bg-slate-400 animate-pulse ${x}`}),z=()=>e.jsxs("div",{className:"flex flex-wrap gap-2 text-slate-900 dark:text-slate-100 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-3 flex-1 p-4 border-slate-500 border rounded-lg my-6",children:[e.jsx(r,{className:"h-4 w-24 mb-2"}),e.jsx(r,{className:"h-4 w-40 mb-2"}),e.jsx(r,{className:"h-8 w-full mb-4"}),e.jsx("div",{className:"flex flex-wrap justify-center items-center flex-1 gap-4",children:[...Array(3)].map((x,d)=>e.jsx(r,{className:"w-[150px] h-[150px] rounded-lg"},d))})]}),e.jsxs("div",{className:"w-fit h-fit p-4 border-slate-500 rounded-lg border my-6",children:[e.jsx("div",{className:"text-center text-lg font-bold",children:"Update Product"}),e.jsxs("form",{className:"flex flex-col justify-center items-center gap-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-around mt-4 gap-3",children:[e.jsx("div",{className:"flex flex-col gap-2",children:[...Array(6)].map((x,d)=>e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsx(r,{className:"h-4 w-40 mb-2"}),e.jsx(r,{className:"h-8 w-48"})]},d))}),e.jsxs("div",{className:"flex flex-col gap-2",children:[[...Array(3)].map((x,d)=>e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsx(r,{className:"h-4 w-40 mb-2"}),e.jsx(r,{className:"h-24 w-48"})]},d)),e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsx(r,{className:"h-4 w-40 mb-2"}),e.jsx(r,{className:"h-8 w-48"})]})]})]}),e.jsx(r,{className:"h-10 w-24 mt-4"})]})]})]}),X=()=>{const x=B(),{data:d,isLoading:F,isError:A}=T(x.id),[I]=Q(),[_]=W(),N=G(),s=d==null?void 0:d.product,[o,b]=l.useState(""),[p,v]=l.useState(""),[m,y]=l.useState(0),[g,k]=l.useState(0),[u,w]=l.useState(0),[n,P]=l.useState(0),[f,S]=l.useState(""),[h,D]=l.useState(""),[j,$]=l.useState([]),[U,C]=l.useState([]);if(l.useEffect(()=>{s&&(b(s.title),v(s.description),y(s.price),k(s.rating),w(s.discountPercentage),P(s.stock),S(s.brand),D(s.category),C(s.images.map(t=>t)))},[s]),A)return e.jsx(H,{to:"/404"});const L=t=>{if(t.target.files){const a=Array.from(t.target.files);$(a),C(a.map(c=>URL.createObjectURL(c)))}},R=async t=>{t.preventDefault();const a=new FormData;if(o!==s.title&&a.append("title",o.trim()),p!==s.description&&a.append("description",p.trim()),m!==s.price&&a.append("price",m.toString().trim()),g!==s.rating&&a.append("rating",g.toString().trim()),u!==s.discountPercentage&&a.append("discountPercentage",u.toString().trim()),n!==s.stock&&a.append("stock",n.toString().trim()),f!==s.brand&&a.append("brand",f.trim()),h!==s.category&&a.append("category",h.trim()),j.length!=0)if(j.length===4)console.log("Sending images also"),j.forEach(c=>{a.append("images",c)});else{i.error("Please upload exactly 4 images.");return}try{const c=await I({formData:a,productId:s._id}).unwrap();c.success?(i.success(c.message),N("/admin/products")):i.error(c.message)}catch(c){console.error(c),i.error("Update failed. Please try again.")}},M=async()=>{try{const t=await _({productId:s._id}).unwrap();if(t.success){i.success(t.message),N("/admin/products");return}else i.error(t.message)}catch(t){console.error(t),i.error("Deletion failed. Please try again.");return}};return F?e.jsx(z,{}):e.jsxs("div",{className:"flex flex-wrap gap-2 text-slate-900 dark:text-slate-100 justify-center",children:[e.jsxs("div",{className:"flex flex-col gap-3 flex-1 p-4 border-gray-500 border rounded-lg my-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"dark:text-slate-100 text-slate-900 font-bold text-xs",children:["ID - ",s._id]}),n>0?e.jsxs("div",{className:"text-green-500 font-bold text-xs",children:["Available - ",n," left"]}):e.jsx("div",{className:"text-red-500 font-bold text-xs",children:"Not Available"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"dark:text-slate-100 text-slate-900 font-mono text-xs",children:["createdAt : ",new Date(s.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"dark:text-slate-100 text-slate-900 font-mono text-xs",children:["updatedAt : ",new Date(s.updatedAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"dark:text-slate-100 text-slate-900 font-bold text-xs",children:o}),e.jsxs("div",{className:"font-mono text-xs",children:["Price : $",m,"/-"]})]}),e.jsx("div",{className:"flex flex-wrap justify-center items-center flex-1 gap-4",children:U.map((t,a)=>e.jsx("img",{className:"w-[150px] rounded-lg",src:t.startsWith("a")?`${E}/${t}`:t,alt:`Product Image ${a+1}`},a))})]}),e.jsxs("div",{className:"w-fit h-fit p-4 border-gray-500 rounded-lg border relative my-6",children:[e.jsxs(O,{className:"bg-slate-900 dark:bg-slate-100 px-3 py-1 absolute top-2 right-2 text-slate-100 dark:text-slate-900 flex items-center justify-center gap-1 rounded-full",to:"/admin/products",children:[e.jsx("div",{className:"text-sm",children:e.jsx(q,{})}),e.jsx("div",{className:"text-xs ",children:" Products"})]}),e.jsx("div",{className:"text-center text-lg font-bold",children:"Update Product"}),e.jsxs("form",{onSubmit:R,className:"flex flex-col justify-center items-center gap-6",children:[e.jsxs("div",{className:"flex flex-wrap justify-around mt-4 gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-semibold",htmlFor:"title",children:"Title"})]}),e.jsx("input",{className:"text-xs rounded-lg py-1 px-2 bg-slate-900 text-slate-100 dark:bg-slate-100 dark:text-slate-900",type:"text",id:"title",value:o,onChange:t=>b(t.target.value),placeholder:"Enter product title."})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-semibold",htmlFor:"price",children:"Price"})]}),e.jsx("input",{className:"text-xs rounded-lg py-1 px-2 bg-slate-900 text-slate-100 dark:bg-slate-100 dark:text-slate-900",type:"number",id:"price",value:m,onChange:t=>y(Number(t.target.value)),placeholder:"Enter product price."})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-semibold",htmlFor:"rating",children:"Rating"})]}),e.jsx("input",{className:"text-xs rounded-lg py-1 px-2 bg-slate-900 text-slate-100 dark:bg-slate-100 dark:text-slate-900",type:"number",id:"rating",value:g,onChange:t=>k(Number(t.target.value)),placeholder:"Enter product rating.",max:5,min:1})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-semibold",htmlFor:"discountPercentage",children:"Discount Percentage"})]}),e.jsx("input",{className:"text-xs rounded-lg py-1 px-2 bg-slate-900 text-slate-100 dark:bg-slate-100 dark:text-slate-900",type:"number",id:"discountPercentage",value:u,onChange:t=>w(Number(t.target.value)),placeholder:"Enter discount percentage.",max:100,min:0})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-semibold",htmlFor:"stock",children:"Stock"})]}),e.jsx("input",{className:"text-xs rounded-lg py-1 px-2 bg-slate-900 text-slate-100 dark:bg-slate-100 dark:text-slate-900",type:"number",id:"stock",value:n,onChange:t=>P(Number(t.target.value)),placeholder:"Enter product stock."})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-semibold",htmlFor:"brand",children:"Brand"})]}),e.jsx("input",{className:"text-xs rounded-lg py-1 px-2 bg-slate-900 text-slate-100 dark:bg-slate-100 dark:text-slate-900",type:"text",id:"brand",value:f,onChange:t=>S(t.target.value),placeholder:"Enter product brand."})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-semibold",htmlFor:"category",children:"Category"})]}),e.jsx("input",{className:"text-xs rounded-lg py-1 px-2 bg-slate-900 text-slate-100 dark:bg-slate-100 dark:text-slate-900",type:"text",id:"category",value:h,onChange:t=>D(t.target.value),placeholder:"Enter product category."})]}),e.jsxs("div",{className:"flex flex-col text-sm gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-semibold",htmlFor:"description",children:"Description"})]}),e.jsx("textarea",{className:"text-xs h-[90px] rounded-lg py-1 px-2 bg-slate-900 text-slate-100 dark:bg-slate-100 dark:text-slate-900",id:"description",value:p,onChange:t=>v(t.target.value),placeholder:"Enter product description."})]}),e.jsxs("div",{className:"flex flex-col text-sm justify-center cursor-pointer items-center mt-5 gap-2",children:[e.jsxs("div",{className:"flex gap-[2px]",children:[e.jsx("div",{className:"text-red-500",children:"*"}),e.jsx("label",{className:"text-slate-900 dark:text-slate-100 font-semibold",htmlFor:"images",children:"Images"})]}),e.jsx("div",{className:"text-xs font-thin",children:"* Please choose exactly 4 images simultaneously."}),e.jsx("input",{className:"text-xs",type:"file",id:"images",multiple:!0,accept:"image/*",onChange:L}),e.jsx("div",{className:"flex flex-wrap text-sm font-semibold gap-2",children:U.map((t,a)=>e.jsx("img",{className:"w-[60px] rounded-3xl",src:t.startsWith("a")?`${E}/${t}`:t,alt:`Product Image ${a+1}`},a))})]})]})]}),e.jsxs("div",{className:"flex justify-around items-center w-full",children:[e.jsx("button",{type:"submit",className:"bg-green-500 text-slate-100 hover:bg-green-600 px-3 text-xs hover:scale-115 mt-4 w-fit py-1 h-fit font-semibold cursor-pointer rounded-full",children:"Update"}),e.jsx("button",{onClick:M,type:"button",className:"bg-red-500 text-slate-100 hover:bg-red-600 px-3 text-xs hover:scale-115 mt-4 w-fit py-1 h-fit font-semibold cursor-pointer rounded-full",children:"Delete"})]})]})]})]})};export{X as default};
