import{j as e,Q as D,u as O,Y as S,Z as P,N as I,s as $,_ as n}from"./index-BGOoP327.js";import{b as T,c as A,d as _}from"./index-CqA4-TEO.js";import{l as q}from"./index-DUXrVzM3.js";import{d as x}from"./index-C2IGffIP.js";import{f as o}from"./date-D1yCoplD.js";import{c as B}from"./index-CVhGOhid.js";import"./iconBase-DY2o13lj.js";const E=()=>e.jsx("div",{className:"bg-slate-100 dark:bg-slate-900 min-h-screen flex flex-col items-center justify-center animate-pulse",children:e.jsxs("div",{className:"w-full max-w-4xl p-4",children:[e.jsx("div",{className:"h-8 bg-slate-400 dark:bg-slate-700 animate-pulserounded w-3/4 mb-4"}),e.jsx("div",{className:"h-8 bg-slate-400 dark:bg-slate-700 animate-pulserounded w-1/2 mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-5 mb-12",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"h-48 bg-slate-400 dark:bg-slate-700 animate-pulserounded mb-4"}),e.jsx("div",{className:"h-96 bg-slate-400 dark:bg-slate-700 animate-pulserounded mb-4"}),e.jsx("div",{className:"h-48 bg-slate-400 dark:bg-slate-700 animate-pulserounded mb-4"})]}),e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"h-80 bg-slate-400 dark:bg-slate-700 animate-pulserounded mb-4"})})]})]})}),R=()=>{const i=D(),t=O(),r=i._id,{data:c,isError:m,isLoading:p}=S(r),[h]=P();if(p)return e.jsx(E,{});const j=c==null?void 0:c.order,{shippingInfo:l,_id:g,discount:f,orderItems:u,shippingCharges:b,createdAt:N,updatedAt:v,status:a,subTotal:y,tax:k,total:w}=j||{_id:"",shippingInfo:{address:"",city:"",country:"",state:"",billingName:"",phoneNumber:"",pinCode:"",email:""},user:{_id:"",name:""},status:"Placed",tax:0,shippingCharges:0,subTotal:0,total:0,discount:0,orderItems:[{productId:"",thumbnail:"",title:"",price:0,quantity:0}],createdAt:"",updatedAt:""};if(m)return e.jsx(I,{to:"/404"});const C=async()=>{if(a!=="Delivered"){n.error("Order is yet not delivered.");return}try{const s=await h(r).unwrap();s.success?(n.success(s.message),t("/orders")):n.error(s.message)}catch(s){console.error(s),n.error("Update failed. Please try again.")}};return e.jsx("div",{className:"bg-slate-100 text-slate-900 dark:bg-slate-900 dark:text-slate-100 min-h-screen ",children:e.jsx("div",{className:"container mx-auto py-8 px-4",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2 border border-slate-500 rounded-xl p-4 bg-white relative dark:bg-slate-800",children:[e.jsxs("div",{className:"flex flex-col  items-center mb-4",children:[e.jsxs("button",{className:"flex justify-center absolute left-0 top-0 items-center px-3 py-1 rounded-full hover:bg-slate-700 dark:hover:bg-slate-200 bg-slate-900 dark:bg-slate-100 text-slate-100 dark:text-slate-900 ",onClick:()=>{t("/orders")},children:[e.jsx(B,{className:"text-sm"}),e.jsx("div",{className:"text-sm",children:"Orders"})]}),e.jsxs("h2",{className:"font-bold mt-2  text-lg",children:["Order ID: #",g]}),e.jsxs("div",{className:"flex justify-between w-full text-sm mt-2",children:[e.jsxs("span",{children:["Ordered Date: ",e.jsx("strong",{children:o(N)})]}),e.jsxs("span",{children:["Last Updated: ",e.jsx("strong",{children:o(v)})]})]})]}),e.jsx("div",{className:"max-h-[400px]  overflow-scroll w-full",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Item"}),e.jsx("th",{className:"p-3",children:"Quantity"}),e.jsx("th",{className:"p-3",children:"Price"}),e.jsx("th",{className:"p-3",children:"Total"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"p-3 flex flex-col sm:flex-row items-center space-x-4",children:[e.jsx("img",{src:s.thumbnail.startsWith("a")?`${$}/${s.thumbnail}`:s.thumbnail,alt:s.title,className:"w-16 h-16 object-cover rounded-md"}),e.jsx("span",{className:"font-bold",children:s.title})]}),e.jsx("td",{className:"p-3 font-mono",children:s.quantity}),e.jsxs("td",{className:"p-3 font-mono",children:["$",s.price]}),e.jsxs("td",{className:"p-3 font-mono",children:["$",s.price*s.quantity]})]},s.productId))})]})}),e.jsx("div",{className:"mt-4 p-4 border-t border-slate-500",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2  gap-4",children:[e.jsxs("div",{className:"gap-2 flex flex-col",children:[e.jsx("h3",{className:"font-bold underline text-sm mb-2",children:"Shipping Information"}),e.jsxs("p",{className:"font-mono text-xs flex flex-wrap gap-1 ",children:[e.jsx("strong",{children:"Name:"})," ",l.billingName]}),e.jsxs("p",{className:"font-mono text-xs flex flex-wrap gap-1 ",children:[e.jsx("strong",{children:"Phone:"})," ",l.phoneNumber]}),e.jsxs("p",{className:"font-mono text-xs flex flex-wrap gap-1 ",children:[e.jsx("strong",{children:"Email:"})," ",l.email]}),e.jsxs("p",{className:"font-mono text-xs flex flex-wrap gap-1 ",children:[e.jsx("strong",{children:"Address:"})," ",l.address]}),e.jsxs("p",{className:"font-mono text-xs flex flex-wrap gap-1 ",children:[e.jsx("strong",{children:"City:"})," ",l.city]}),e.jsxs("p",{className:"font-mono text-xs flex flex-wrap gap-1 ",children:[e.jsx("strong",{children:"State:"})," ",l.state]}),e.jsxs("p",{className:"font-mono text-xs flex flex-wrap gap-1 ",children:[e.jsx("strong",{children:"Country:"})," ",l.country]}),e.jsxs("p",{className:"font-mono text-xs flex flex-wrap gap-1 ",children:[e.jsx("strong",{children:"Pin Code:"})," ",l.pinCode]})]}),e.jsxs("div",{className:"gap-2 flex flex-col",children:[e.jsx("h3",{className:"font-bold text-sm underline mb-2",children:"Order Summary"}),e.jsxs("p",{className:"font-mono text-xs flex gap-1 ",children:[e.jsx("strong",{children:"Tax:"})," $",k]}),e.jsxs("p",{className:"font-mono text-red-500 text-xs flex gap-1 ",children:[e.jsx("strong",{children:"Discount:"}),"  -$",f]}),e.jsxs("p",{className:"font-mono text-xs flex gap-1 ",children:[e.jsx("strong",{children:"Shipping Charges:"})," $",b]}),e.jsxs("p",{className:"font-mono text-xs flex gap-1 ",children:[e.jsx("strong",{children:"Sub Total:"})," $",y]}),e.jsxs("p",{className:"font-mono text-xs text-green-500 flex gap-1 ",children:[e.jsx("strong",{children:"Total:"})," $",w]})]})]})})]}),e.jsxs("div",{className:"sm:col-span-1 relative border border-slate-500 rounded-2xl max-h-[650px] p-4",children:[e.jsx("h3",{className:"text-center font-bold mb-4",children:"Order Status"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d,{icon:e.jsx(T,{}),label:"Order Placed",isCompleted:!0}),e.jsx(d,{icon:e.jsx(A,{}),label:"Products Picked",isCompleted:a==="Picked"||a==="Packed"||a==="Shipped"||a==="Delivered"}),e.jsx(d,{icon:e.jsx(_,{}),label:"Order Packed",isCompleted:a==="Packed"||a==="Shipped"||a==="Delivered"}),e.jsx(d,{icon:e.jsx(q,{}),label:"Shipped",isCompleted:a==="Shipped"||a==="Delivered"}),e.jsx(d,{icon:e.jsx(x,{}),label:"Delivered",isCompleted:a==="Delivered"})]}),a==="Delivered"&&e.jsx("button",{onClick:C,className:"px-3 absolute bottom-4 py-1 bg-red-500 text-slate-100 font-semibold rounded-full text-sm hover:bg-red-600",children:"Delete Order"})]})]})})})},d=({icon:i,label:t,isCompleted:r})=>e.jsxs("div",{className:` ${r?"text-green-500 ":"text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-2xl",children:i}),e.jsx("div",{className:"text-sm",children:t})]}),r&&e.jsx(x,{className:"text-xl ml-auto"})]}),e.jsxs("div",{className:`${t==="Delivered"?"hidden":""} w-full flex flex-col items-start px-9`,children:[e.jsx("div",{children:"|"}),e.jsx("div",{children:"|"}),e.jsx("div",{children:"|"})]})]});export{R as default};
