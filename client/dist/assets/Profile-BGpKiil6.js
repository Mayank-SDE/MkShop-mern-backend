import{c as w,r as c,u as y,e as D,h as F,i as C,j as e,N as U,s as _,_ as i,k as E,l as I,p as S}from"./index-BGOoP327.js";import{f as P}from"./date-D1yCoplD.js";const A=()=>{const{user:a}=w(t=>t.userReducer),[s,g]=c.useState({_id:a==null?void 0:a._id,username:a==null?void 0:a.username,image:a==null?void 0:a.image,email:a==null?void 0:a.email,password:a==null?void 0:a.password,gender:a==null?void 0:a.gender,dob:a==null?void 0:a.dob,role:a==null?void 0:a.role,createdAt:a==null?void 0:a.createdAt,updatedAt:a==null?void 0:a.updatedAt}),[m,u]=c.useState(null),[x,h]=c.useState(null),p=y(),f=D(),[b]=F(),[j]=C(),o=t=>{const{name:l,value:r}=t.target;if(l==="image"&&t.target instanceof HTMLInputElement&&t.target.files&&t.target.files[0]){const n=t.target.files[0];u(URL.createObjectURL(n)),h(n)}else g(n=>({...n,[l]:r}))},N=async t=>{t.preventDefault();const l=new FormData;l.append("_id",s._id),l.append("username",s.username),l.append("email",s.email),l.append("password",s.password),l.append("gender",s.gender),l.append("dob",s.dob),x&&l.append("image",x);try{const r=await b(l).unwrap();r.success?(i.success(r.message),f(E(r.user)),p("/profile")):i.error(r.message)}catch(r){console.log(r)}},v=async()=>{try{const t=await j(s._id).unwrap();t.success?(i.success(t.message),f(I()),await S.purge(),p("/")):i.error(t.message)}catch(t){console.log(t)}},d=s.image;return s?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col items-center w-full",children:[e.jsx("div",{className:"font-bold text-lg mb-8",children:"Profile Details"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-xl shadow-lg max-w-full p-8",children:e.jsxs("form",{onSubmit:N,className:"w-full text-sm max-w-md mx-auto",children:[e.jsxs("div",{className:"flex flex-col items-center gap-5",children:[m?e.jsx("img",{src:m,alt:s.username,className:"w-24 h-24 rounded-full object-cover"}):e.jsx("img",{src:d.startsWith("a")?`${_}/${d}`:d,alt:s.username,className:"w-24 h-24 rounded-full object-cover"}),e.jsx("input",{type:"file",name:"image",onChange:o,className:" text-sm border-slate-500 max-w-fit border"}),e.jsx("div",{className:"text-xs font-thin text-slate-500",children:"* Only png , jpeg and jpg format allowed."})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"username",className:"font-serif",children:"Name"}),e.jsx("input",{onChange:o,className:"text-sm rounded-xl border-slate-500 border text-gray-900 px-3 py-1",type:"text",id:"username",name:"username",value:s.username})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"email",className:"font-serif",children:"Email"}),e.jsx("input",{onChange:o,className:"text-sm rounded-xl border-slate-500 border text-gray-900 px-3 py-1",type:"email",name:"email",id:"email",value:s.email})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"password",className:"font-serif",children:"Password"}),e.jsx("input",{onChange:o,className:"text-sm rounded-xl border-slate-500 border text-gray-900 px-3 py-1",type:"password",name:"password",id:"password",value:s.password||""})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"gender",className:"font-serif",children:"Gender"}),e.jsxs("select",{onChange:o,className:"text-sm rounded-xl border-slate-500 border text-gray-900 px-3 py-1",name:"gender",value:s.gender,children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"dob",className:"font-serif",children:"Date of Birth"}),e.jsx("input",{onChange:o,name:"dob",className:"text-sm rounded-xl border-slate-500 border text-gray-900 px-3 py-1",type:"date",id:"dob",value:P(s.dob)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-around gap-3 mt-4",children:[e.jsx("button",{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white px-5 py-1 rounded-full transition-transform transform hover:scale-110",children:"Update"}),e.jsx("button",{type:"button",className:"bg-red-500 hover:bg-red-600 text-white px-5 py-1 rounded-full transition-transform transform hover:scale-110",onClick:v,children:"Delete"})]})]})]})})]})}):e.jsx(U,{to:"/"})};export{A as default};
